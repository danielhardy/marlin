erDiagram
    USERS ||--o{ MEMBERSHIPS : participates_in
    BUSINESSES ||--o{ MEMBERSHIPS : has
    BUSINESSES ||--o{ PLAID_ITEMS : owns
    PLAID_ITEMS ||--o{ BANK_ACCOUNTS : exposes
    BANK_ACCOUNTS ||--o{ TRANSACTIONS : contains
    BUSINESSES ||--o{ CATEGORIES : defines
    CATEGORIES }o--o{ CATEGORIES : parent_child
    CATEGORIES ||--o{ TRANSACTIONS : classifies

    %%—— Tables ——%%
    USERS {
      UUID    id PK
      TEXT    email UNIQUE
      TEXT    full_name
      TIMESTAMPTZ created_at
    }
    BUSINESSES {
      UUID    id PK
      TEXT    legal_name
      TEXT    country
      TIMESTAMPTZ created_at
    }
    MEMBERSHIPS {
      UUID    id PK
      UUID    user_id FK
      UUID    business_id FK
      TEXT    role
      TIMESTAMPTZ created_at
    }
    PLAID_ITEMS {
      UUID    id PK
      UUID    business_id FK
      TEXT    item_id UNIQUE     “Plaid’s item_id”
      TEXT    access_token       “Plaid access token”
      TIMESTAMPTZ created_at
    }
    BANK_ACCOUNTS {
      UUID    id PK
      UUID    plaid_item_id FK
      TEXT    account_id UNIQUE  “Plaid account_id”
      TEXT    name
      TEXT    mask
      TEXT    type
      NUMERIC current_balance
      TIMESTAMPTZ created_at
    }
    TRANSACTIONS {
      UUID    id PK
      UUID    bank_account_id FK
      DATE    date
      NUMERIC amount
      TEXT    currency
      TEXT    description
      UUID    category_id FK
      TEXT    status            “Enum: pending, cleared”
      TIMESTAMPTZ created_at
    }
    CATEGORIES {
      UUID    id PK
      UUID    business_id FK
      UUID    parent_id FK
      TEXT    name
      TIMESTAMPTZ created_at
    }
